<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Speculation Rules Tests - Index</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
      line-height: 1.6;
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #0060df;
      padding-bottom: 10px;
    }
    .test-section {
      margin: 30px 0;
      padding: 20px;
      background: #f9f9f9;
      border-left: 4px solid #0060df;
      border-radius: 4px;
    }
    .test-section h2 {
      margin-top: 0;
      color: #0060df;
    }
    .test-link {
      display: block;
      padding: 12px 15px;
      margin: 10px 0;
      background: white;
      border: 1px solid #ddd;
      border-radius: 4px;
      text-decoration: none;
      color: #0060df;
      transition: all 0.2s;
    }
    .test-link:hover {
      background: #0060df;
      color: white;
      border-color: #0060df;
      transform: translateX(5px);
    }
    .test-link strong {
      display: block;
      font-size: 1.1em;
      margin-bottom: 5px;
    }
    .test-link .description {
      color: #666;
      font-size: 0.9em;
    }
    .test-link:hover .description {
      color: rgba(255, 255, 255, 0.9);
    }
    .setup-info {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 4px;
      padding: 15px;
      margin: 20px 0;
    }
    .setup-info h3 {
      margin-top: 0;
      color: #856404;
    }
    .setup-info code {
      background: #fff;
      padding: 2px 6px;
      border-radius: 3px;
      border: 1px solid #ffc107;
    }
    ul {
      margin: 10px 0;
    }
    li {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <h1>Speculation Rules Manual Tests</h1>

  <div class="setup-info">
    <h3>‚öôÔ∏è Setup Instructions</h3>
    <p>To test speculation rules, run Firefox with the following preferences enabled:</p>
    <ul>
      <li><code>dom.speculation_rules.enabled=true</code></li>
      <li><code>dom.speculation_rules.prefetch.on_hover=true</code> (for moderate eagerness)</li>
      <li><code>dom.speculation_rules.prefetch.on_mousedown=true</code> (for conservative eagerness)</li>
    </ul>
    <p>Example command:</p>
    <code>./mach run --setpref="dom.speculation_rules.enabled=true" --setpref="dom.speculation_rules.prefetch.on_hover=true" --setpref="dom.speculation_rules.prefetch.on_mousedown=true"</code>
  </div>

  <div class="test-section">
    <h2>üìã Basic Tests</h2>

    <a href="manual_speculation_test.html" class="test-link">
      <strong>Basic Speculation Rules Test</strong>
      <span class="description">Tests inline speculation rules with moderate and conservative eagerness levels. Includes hover and mousedown triggers.</span>
    </a>

    <a href="manual_speculation_immediate_test.html" class="test-link">
      <strong>Immediate Eagerness Test</strong>
      <span class="description">Tests immediate eagerness speculation rules that prefetch as soon as the page loads.</span>
    </a>
  </div>

  <div class="test-section">
    <h2>üéØ Advanced Pattern Matching</h2>

    <a href="manual_speculation_predicates_test.html" class="test-link">
      <strong>Predicates Test</strong>
      <span class="description">Tests predicate-based speculation rules with href_matches and logical operators (and, or, not).</span>
    </a>

    <a href="manual_speculation_urlpattern_test.html" class="test-link">
      <strong>URLPattern Test</strong>
      <span class="description">Tests complex URLPattern matching including wildcards, regex patterns, alternations, and optional groups (e.g., Shopify-style patterns).</span>
    </a>
  </div>

  <div class="test-section">
    <h2>üìÅ External Files</h2>

    <a href="manual_speculation_external_test.html" class="test-link">
      <strong>External Speculation Rules Test</strong>
      <span class="description">Tests loading speculation rules from an external JSON file using &lt;script type="speculationrules" src="..."&gt;.</span>
    </a>
  </div>

  <div class="test-section">
    <h2>üìÑ Supporting Files</h2>
    <ul>
      <li><code>speculation_rules_subpage1.html</code> - Test destination page 1</li>
      <li><code>speculation_rules_subpage2.html</code> - Test destination page 2</li>
      <li><code>speculation_rules_subpage3.html</code> - Test destination page 3</li>
      <li><code>speculation_rules_external.json</code> - External speculation rules JSON file</li>
    </ul>
  </div>

  <div class="test-section">
    <h2>üîç What to Observe</h2>
    <p>When testing, monitor the following:</p>
    <ul>
      <li><strong>Browser Console:</strong> Look for "Parsed X speculation rules" and "Prefetching" messages</li>
      <li><strong>Network Panel:</strong> Watch for prefetch requests when hovering/clicking links</li>
      <li><strong>Firefox Profiler:</strong> Observe "Speculation Rules" markers</li>
    </ul>
  </div>
</body>
</html>
